<%- title = t('page_titles.responsible_body_schools_list') %>
<% content_for :title, title %>
<% content_for :browser_title, title %>

<%- content_for :before_content do %>
  <% breadcrumbs([
                   { "Home" => responsible_body_home_path },
                   { t('page_titles.responsible_body_devices_home') => responsible_body_devices_path },
                   title ,
                 ]) %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">
      <%= title %>
    </h1>

    <%= render GovukComponent::Details.new(summary: 'Is this list wrong?') do %>
      <% if @responsible_body.is_a_local_authority? %>
        <p>This is a list of all local authority maintained and special schools.</p>
      <% end %>
      <p>Email <%= ghwt_contact_mailto(subject: 'Problem with list of schools') %>
        and tell us what to&nbsp;change.</p>
    <%- end %>
  </div>
</div>

<% if @responsible_body.has_virtual_cap_feature_flags? %>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= render ResponsibleBody::PooledDeviceCountComponent.new(responsible_body: @responsible_body) %>
  </div>
</div>
<%- end %>

<% if @specific_circumstances_schools.count.positive? %>
  <%= render partial: 'school_states_table', locals: { schools: @specific_circumstances_schools,
    heading: t('.specific_circumstances_heading') } %>
<%- end %>

<% if @ordering_schools.count.positive? %>
  <%= render partial: 'school_states_table', locals: { schools: @ordering_schools,
    heading: t('.ordering_schools_heading'),
    heading_text: t('.ordering_schools_heading_text') } %>
<%- end %>

<% if @fully_open_schools.count.positive? %>
  <%= render partial: 'school_states_table', locals: { schools: @fully_open_schools,
    heading: t('.fully_open_schools_heading') } %>
<%- end %>
