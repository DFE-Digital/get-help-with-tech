<%- content_for :before_content, govuk_link_to('Back', support_school_path(@school.urn), class: 'govuk-back-link') %>
<%- title = t('page_titles.support_edit_allocation') %>
<%- content_for :title, title %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds govuk-!-margin-bottom-4">
    <h1 class="govuk-heading-xl">
      <span class="govuk-caption-xl"><%= @school.name %></span>
      <%= title %>
    </h1>

    <%= form_for @form, url: support_devices_school_allocation_path(@school.urn), method: :patch do |f| %>
      <%= f.govuk_error_summary %>

      <p class="govuk-body">
        <%= t(@form.order_state, scope: %i[support allocation edit order_states], cap: @form.current_allocation.cap, allocation: @form.current_allocation.allocation) %>
      </p>

      <%= f.govuk_number_field :allocation,
                              only_integer: true,
                              label: {text: 'New allocation'},
                              width: 3 %>

      <%= f.govuk_submit 'Save' %>
    <%- end %>
  </div>
</div>
